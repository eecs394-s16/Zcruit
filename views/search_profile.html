<!DOCTYPE html>
<html ng-app="zcruit">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.3/angular.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.3/angular-animate.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/1.3.2/ui-bootstrap-tpls.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-touch/1.5.3/angular-touch.min.js"></script>
  <link href='https://rawgit.com/rzajac/angularjs-slider/master/dist/rzslider.css' type='text/css' rel='stylesheet'>
  <script src='https://rawgit.com/rzajac/angularjs-slider/master/dist/rzslider.js'></script>
  <script src='../lib/lodash.js'></script>
  <script src='../lib/angularjs-dropdown-multiselect.js'></script>
  <script src="../zcruit.js"></script>
  <script src="../controllers/searchController.js"></script>
  <link href="https://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
  <link href="../css/player_card.css" rel="stylesheet">
  <link href="../css/sidebar.css" rel="stylesheet">
  <link href="../css/search_profile.css" rel="stylesheet">
</head>

<body ng-controller="searchController">
  <div id="sidebar">
    <div id="sidebar-upper" ng-click="openBigBoard()">
      <div class="sidebar-icon">
        <img src="../img/big_board.png">
        <div>Big Board</div>
      </div>
    </div>

    <div id="sidebar-middle">
      <div class="sidebar-icon" ng-click="openSearchModal()">
        <img src="../img/search.png">
        <div>Search</div>
      </div>
      <div class="sidebar-icon">
        <img src="../img/sort.png">
        <div>Sort</div>
      </div>
      <div class="sidebar-icon">
        <img src="../img/save.png">
        <div>Save list</div>
      </div>
    </div>
  </div>

  <div id="resultlist">
    <select class="form-control titleCard" ng-options="list as list.List_name for list in savedLists" ng-model="selectedList" ng-change="showList()">
    </select>

    <div class="playerCard" ng-repeat="p in players | orderBy : sortParam : sortReverse track by p.Player_id" ng-click="setSelectedPlayer(p)">
			<div class="status" ng-class="statusColor(p.NU_status)"></div>
      <div class="avatar" ng-style="{'background-image': 'url(' + p.Img_url + ')'}"></div>
			<div class="player-info-outer">
			  <div class="player-info-inner">
  				<div class="player-info-name">{{p.FirstName}} {{p.LastName}}</div>
  				<div class="player-info-stats">{{p.Position_name}} - {{height(p.Height, 1)}}'{{height(p.Height, 2)}}" {{p.Weight}}lb</div>
  				<div class="player-info-coach">{{p.HS_city}}, {{p.HS_state}} - {{initials(p.Coach_name)}}</div>
        </div>
			</div>
      <div class="zscore-wrapper">
      	<div class="zscore-flex" ng-class="zscoreColor(p.Zscore)">{{p.Zscore}}</div>
        <div class="zscore-corner" ng-class="zscoreColor(p.Zscore2)" ng-if="p.Visits < 2"></div>
      </div>
		</div>
  </div>
  <div id="profile" ng-model="selected">
    <div id="topcard">
      <div id="image-box">
        <div id="profile-image" ng-style="{'background-image': 'url(' + selected.Img_url + ')'}"></div>
        <div id="profile-status" ng-class="statusColor(selected.NU_status)">{{statusText(selected.NU_status)}}</div>
      </div>

      <div id="glanceinfo">

        <div id="name">
          {{selected.FirstName}} {{selected.LastName}}
          <div id="profile-zscore-wrapper"
            uib-popover-template='zscorePopover.templateUrl'
            popover-title="{{zscorePopover.title}}"
            popover-placement="bottom-right"
            popover-trigger="outsideClick">
            <div id="visits-remaining" ng-if="selected.Visits < 2">{{2 - selected.Visits}} visit{{selected.Visits == 0 ? 's' : ''}} to raise</div>
            <div ng-class="['profile-zscore', zscoreColor(selected.Zscore), {'double-zscore-left': selected.Visits < 2}]">{{selected.Zscore}}</div>
            <div ng-if="selected.Visits < 2" ng-class="['profile-zscore', zscoreColor(selected.Zscore2), {'double-zscore-right': selected.Visits < 2}]">{{selected.Zscore2}}</div>
          </div>
        </div>

        <div class="summary">
          <p>{{selected.Position_name}}</p>
          <p>{{height(selected.Height, 1)}}'{{height(selected.Height, 2)}}", {{selected.Weight}}lb.</p>
          <p>Year: {{selected.Year}}</p>
          <p>Coach: {{selected.Coach_name}}</p>
        </div>

        <div class="summary">
          <p>Uniform #: 18</p>
          <p>{{selected.HS_name}}</p>
          <p>{{selected.HS_city}}, {{selected.HS_state}} {{selected.HS_zip}}</p>
        </div>

        <div class="btn-group" uib-dropdown>
          <button id="single-button" class="btn btn-primary"
            type="button"
            uib-dropdown-toggle
            uib-popover-template="newListPopover.templateUrl"
            popover-placement="left"
            popover-title="{{newListPopover.title}}"
            popover-trigger="none"
            popover-is-open="newListPopoverIsOpen">
            Add to list <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" uib-dropdown-menu role="menu">
            <li role="menuitem" ng-repeat="list in savedLists" ng-click="savePlayer(selected, list)"><a href="#">{{list.List_name}}</a></li>
            <li class="divider"></li>
            <li role="menuitem" ng-click="newListPopoverIsOpen = true"><a href="#">New list</a></li>
          </ul>
        </div>
      </div>

      <!-- Be careful here - how are multiple offers displaying  -->
      <div id="offer-summary" >
        <img class="offer-icon" ng-repeat="school in selected.offers track by school.id" ng-src="{{school.img_path}}">
      </div>
    </div>

    <uib-tabset id="profile-tabs" justified="true">
      <uib-tab index="0" heading="Bio">
        <div id="bio" class="tab row">
          <!-- TODO: Cleanup html/css structure -->
          <div class="col-md-6">
            <div class="info-section">
              <h4>Contact Information</h4>
              <table>
                <tr>
                  <td>Phone</td>
                  <td>{{phoneFormat(selected.Phone)}}</td>
                </tr>
                <tr>
                  <td>Email</td>
                  <td>{{selected.Email}}</td>
                </tr>
                <tr>
                  <td>Address</td>
                  <td>{{selected.Address}}<br>{{selected.Hometown_city}}, {{selected.Hometown_state}} {{selected.Hometown_zip}}</td>
                </tr>
              </table>
            </div>

            <div class="info-section">
              <h4>High School</h4>
              <table>
                <tr>
                  <td>Name</td>
                  <td>{{selected.HS_name}}</td>
                </tr>
                <tr>
                  <td>Address</td>
                  <td>{{selected.HS_city}}, {{selected.HS_state}} {{selected.HS_zip}}</td>
                </tr>
                <tr>
                  <td>Phone</td>
                  <td>{{phoneFormat(selected.HS_phone)}}</td>
                </tr>
                <tr>
                  <td>GPA</td>
                  <td>{{selected.GPA}}</td>
                </tr>
              </table>
            </div>
          </div>

          <div class="col-md-6">
            <div class="info-section">
              <h4>Connections</h4>
              <ul>
                <li>{{selected.Visits}} visit{{selected.Visits != 1 ? "s" : ""}}</li>
                <li>{{selected.Visits_overnight}} overnight visit{{selected.Visits_overnight != 1 ? "s" : ""}}</li>
                <li ng-if="selected.Attended_camp == 1">Attended camp</li>
                <li ng-if="selected.Legacy == 1">Legacy</li>
                <li ng-if="selected.Sibling == 1">Sibling</li>
                <li ng-if="selected.Other_strong_connections == 1">Other strong connection</li>
              </ul>
            </div>

            <div class="info-section">
              <h4>Family</h4>
              <table>
                <tr>
                  <td>Parent 1</td>
                  <td>{{selected.Parent1}}</td>
                </tr>
                <tr>
                  <td>Parent 2</td>
                  <td>{{selected.Parent2}}</td>
                </tr>
                <tr>
                  <td>Home</td>
                  <td>{{selected.Hometown_city}}, {{selected.Hometown_state}}</td>
                </tr>
                <tr>
                  <td>SES</td>
                  <td>{{selected.SES}}</td>
                </tr>
                <tr>
                  <td>Education</td>
                  <td>{{selected.Parental_education}}</td>
                </tr>
              </table>
            </div>
          </div>
        </div>
      </uib-tab>
      <uib-tab index="1" heading="Stats">
        Short Labeled Justified content
      </uib-tab>
      <uib-tab index="2" heading="Media">
        Long Labeled Justified content
      </uib-tab>
      <uib-tab index="3" heading="Notes">
        Long Labeled Justified content
      </uib-tab>
    </uib-tabset>
  </div>

<!-- Handle the Modal Popup -->
<div style="visibility: hidden">
    <script type="text/ng-template" id="myModalContent.html">
        <div class="modal-header">
            <h3 class="modal-title">Player search</h3>
        </div>
        <div class="modal-body">

        <form>

          <div class="form-group row">
            <label class="col-sm-1 form-control-label">First Name</label>
            <div class="col-sm-4">
              <input type="text" class="form-control" ng-model='firstName' placeholder="John">
            </div>

            <label class="col-sm-1 form-control-label">Last Name</label>
            <div class="col-sm-4">
              <input type="text" class="form-control" ng-model='lastName' placeholder="Smith">
            </div>
          </div>

          <div class='form group row'>
            <label class="col-sm-2 form-control-label">Z-Score</label>
            <div class='col-sm-5'>
            <rzslider rz-slider-model="zscoreSlider.minValue" rz-slider-high="zscoreSlider.maxValue" rz-slider-options="zscoreSlider.options"></rzslider>
            <br><br>
            <input type="checkbox" ng-model="checkboxModel.includePredicted">
            <label>Include Ultimate Z-Score</label>
            </div>
          </div>


          <div class="form-group row">
            <label class="col-sm-2 form-control-label">Status</label>
            <div class="col-sm-5">
              <div ng-dropdown-multiselect="" options="statusData" selected-model="statusModel" extra-settings="settings_dropdown"></div>
            </div>
          </div>

          <div class="form-group row">
            <label class="col-sm-2 form-control-label">Position</label>
            <div class="col-sm-5">
              <div ng-dropdown-multiselect="" options="positionData" selected-model="positionModel" extra-settings="settings_dropdown"></div>
            </div>
            <div class="col-sm-5">
              {{positionModel}}
            </div>
          </div>

          <div class="form-group row">
            <label class="col-sm-2 form-control-label">Year</label>
            <div class="col-sm-5">
              <div ng-dropdown-multiselect="" options="yearData" selected-model="yearModel" extra-settings="settings_dropdown"></div>
            </div>
          </div>

        <div class="form-group row">
            <label class="col-sm-2 form-control-label">High School</label>
            <div class="col-sm-5">
              <input type="text" class="form-control" ng-model='highSchool' placeholder="High School">
            </div>
          </div>

         <div class="form-group row">
            <label class="col-sm-2 form-control-label">State</label>
            <div class="col-sm-5">
              <div ng-dropdown-multiselect="" options="stateData" selected-model="stateModel" extra-settings="settings_dropdown"></div>
            </div>
          </div>

         <div class="form-group row">
            <label class="col-sm-2 form-control-label">Area Coach</label>
            <div class="col-sm-5">
              <div ng-dropdown-multiselect="" options="coachData" selected-model="coachModel" extra-settings="settings_dropdown"></div>
            </div>
          </div>

        <div ng-show="advancedFilters">
         <div class='form group row'>
            <label class="col-sm-2 form-control-label">Height</label>
            <rzslider class='col-sm-5' rz-slider-model="heightSlider.minValue" rz-slider-high="heightSlider.maxValue" rz-slider-options="heightSlider.options"></rzslider>
          </div>

        <div class='form group row'>
            <label class="col-sm-2 form-control-label">Weight</label>
            <rzslider class='col-sm-5' rz-slider-model="weightSlider.minValue" rz-slider-high="weightSlider.maxValue" rz-slider-options="weightSlider.options"></rzslider>
          </div>

        <div class='form group row'>
            <label class="col-sm-2 form-control-label">GPA</label>
            <rzslider class='col-sm-5' rz-slider-model="gpaSlider.minValue" rz-slider-high="gpaSlider.maxValue" rz-slider-options="gpaSlider.options"></rzslider>
          </div>
        </div>

        </form>
        </div>
        <div class="modal-footer">
            <button id="advancedFiltersButton" style="float: left;" class="btn btn-info" type="button" ng-click="showAdvancedFilters()">
                <span ng-show="advancedFilters">Hide</span>
                <span ng-show="!advancedFilters">Show</span>
                Advanced Filters
            </button>
            <button class="btn btn-primary" type="button" ng-click="ok()">OK</button>
            <button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
        </div>



    </script>
</div>

</body>

</html>
